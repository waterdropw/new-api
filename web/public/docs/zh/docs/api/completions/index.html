<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>补全（Completions）接口</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="../shared.css" />
  </head>
  <body>
    <main class="page">
      <nav class="breadcrumb">
        <a href="/docs/zh/docs/api/index.html">API 参考</a>
        <span>/</span>
        <span>补全</span>
      </nav>

      <header class="endpoint-header">
        <div>
          <span class="method-badge">POST</span>
          <code class="endpoint-path"><span>/</span>v1<span>/</span>completions</code>
        </div>
        <h1>补全（Completions）</h1>
        <p class="subtitle">传统文本补全接口，兼容 OpenAI Completions 格式</p>
      </header>

      <section class="section">
        <h2 class="section-title">接口说明</h2>
        <p class="section-desc">
          补全接口用于对一段文本进行续写或补全。此接口为传统接口，新应用建议优先使用 Chat 接口。
        </p>
        <div class="info-box">
          实际可用模型名称以控制台配置为准，部分模型可能只支持聊天接口。
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">认证</h2>
        <p class="section-desc">使用 Bearer Token 认证，格式：<code>Authorization: Bearer sk-xxxxxx</code></p>
      </section>

      <section class="section">
        <h2 class="section-title">请求体参数</h2>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>参数</th>
                <th>类型</th>
                <th>必需</th>
                <th>说明</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>model</code></td>
                <td>string</td>
                <td><span class="required">是</span></td>
                <td>模型名称，如 gpt-3.5-turbo-instruct</td>
              </tr>
              <tr>
                <td><code>prompt</code></td>
                <td>string | array</td>
                <td><span class="required">是</span></td>
                <td>要补全的文本提示</td>
              </tr>
              <tr>
                <td><code>max_tokens</code></td>
                <td>integer</td>
                <td><span class="optional">否</span></td>
                <td>最大生成 token 数，默认 16</td>
              </tr>
              <tr>
                <td><code>temperature</code></td>
                <td>number</td>
                <td><span class="optional">否</span></td>
                <td>采样温度 (0-2)，默认 1</td>
              </tr>
              <tr>
                <td><code>top_p</code></td>
                <td>number</td>
                <td><span class="optional">否</span></td>
                <td>核采样参数 (0-1)，默认 1</td>
              </tr>
              <tr>
                <td><code>n</code></td>
                <td>integer</td>
                <td><span class="optional">否</span></td>
                <td>生成的补全数量，默认 1</td>
              </tr>
              <tr>
                <td><code>stream</code></td>
                <td>boolean</td>
                <td><span class="optional">否</span></td>
                <td>是否流式响应，默认 false</td>
              </tr>
              <tr>
                <td><code>stop</code></td>
                <td>string | array</td>
                <td><span class="optional">否</span></td>
                <td>停止生成的标记序列，最多 4 个</td>
              </tr>
              <tr>
                <td><code>presence_penalty</code></td>
                <td>number</td>
                <td><span class="optional">否</span></td>
                <td>存在惩罚 (-2.0 到 2.0)，默认 0</td>
              </tr>
              <tr>
                <td><code>frequency_penalty</code></td>
                <td>number</td>
                <td><span class="optional">否</span></td>
                <td>频率惩罚 (-2.0 到 2.0)，默认 0</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">请求示例</h2>
        <div class="code-block">
          <div class="code-header">cURL</div>
          <div class="code-content">
            <pre><code>curl -X POST "https://your-base-url/v1/completions" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-xxxxxx" \
  -d '{
    "model": "gpt-3.5-turbo-instruct",
    "prompt": "人工智能是什么？请简单介绍一下。",
    "max_tokens": 128,
    "temperature": 0.7
  }'</code></pre>
          </div>
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">响应示例</h2>
        <div class="code-block">
          <div class="code-header">200 OK</div>
          <div class="code-content">
            <pre><code>{
  "id": "cmpl-abc123",
  "object": "text_completion",
  "created": 1700000000,
  "model": "gpt-3.5-turbo-instruct",
  "choices": [
    {
      "text": "人工智能（AI）是计算机科学的一个分支，旨在创建能够模拟人类智能的系统...",
      "index": 0,
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 12,
    "completion_tokens": 45,
    "total_tokens": 57
  }
}</code></pre>
          </div>
        </div>
      </section>

      <!-- Online Test Section -->
      <div class="test-section">
        <div class="test-header" onclick="toggleTestSection()">
          <div class="test-header-left">
            <span class="test-header-title">在线测试</span>
            <span class="test-header-desc">直接在此页面测试 API</span>
          </div>
          <button class="test-header-button" id="sendBtn" onclick="sendRequest(event)">
            <span>发送请求</span>
            <span class="method-badge-header">POST</span>
          </button>
          <svg class="test-toggle expanded" id="testToggle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="m6 9 6 6 6-6"/>
          </svg>
        </div>
        <div class="test-content expanded" id="testContent">
          <div class="test-subsection">
            <div class="test-subsection-header" onclick="toggleSubsection('auth')">
              <svg class="test-subsection-toggle" id="authToggle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m6 9 6 6 6-6"/>
              </svg>
              <span class="test-subsection-title">Authorization</span>
            </div>
            <div class="test-subsection-content" id="authContent">
              <div class="test-form-group">
                <label class="test-label">Token</label>
                <input type="text" class="test-input" id="authToken" placeholder="sk-xxxxxx">
              </div>
            </div>
          </div>

          <div class="test-subsection">
            <div class="test-subsection-header" onclick="toggleSubsection('body')">
              <svg class="test-subsection-toggle" id="bodyToggle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m6 9 6 6 6-6"/>
              </svg>
              <span class="test-subsection-title">Body</span>
            </div>
            <div class="test-subsection-content" id="bodyContent">
              <div class="test-form-group">
                <textarea class="test-input test-textarea" id="requestBody">{
  "model": "gpt-3.5-turbo-instruct",
  "prompt": "请用一句话介绍地球八大行星：",
  "max_tokens": 128,
  "temperature": 0.7
}</textarea>
              </div>
            </div>
          </div>

          <div class="test-response" id="responseArea" style="display: none;">
            <div class="test-response-header">
              <span class="test-response-status" id="responseStatus"></span>
            </div>
            <div class="test-response-body">
              <pre id="responseBody"></pre>
            </div>
          </div>
        </div>
      </div>

    </main>
    <script src="../shared.js"></script>
    <script>
      var sendRequest = sendApiRequest('/v1/completions');
    </script>
  </body>
</html>
